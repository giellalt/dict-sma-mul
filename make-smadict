
# Makefile to make smadict.fst
# the fst just recognises all lemmas in the smanob dictionary
# it does __not__ translate them.

# usage.
# make -f make-smadict

# pseudocode:

# read all lexicon files
# pick the lemmas
# save as smalemmalist.txt
# open xfst
# run command "read text < smalemmalist.txt"
# save result as smadict.fst
# the resulting fst to be used to test dict content


XFST = xfst

LEX = src/a_smanob.xml  \
	adv_smanob.xml		 \
	cc_smanob.xml		 \
	cs_smanob.xml		 \
	i_smanob.xml		 \
	n_smanob.xml		 \
	npl_smanob.xml		 \
	num_smanob.xml		 \
	pcle_smanob.xml		 \
	pronDem_smanob.xml	 \
	pronIndef_smanob.xml \
	pronPers_smanob.xml	 \
	pronRec_smanob.xml	 \
	pronRefl_smanob.xml	 \
	pronRel_smanob.xml	 \
	prop_smanob.xml		 \
	px_smanob.xml		 \
	vCop_smanob.xml		 \
	vNeg_smanob.xml		 \
	v_smanob.xml		 

smadict.fst: bin/smadict.fst
bin/smadict.fst: bin/smalemmalist.txt
	@echo
	@echo "*** Building  smadict.fst ***"
	@echo
	@printf "read text $< \n\
	save stack $@ \n\
	quit \n" > ../tmp/smadict-fst-script
	$(XFST)  < ../tmp/smadict-fst-script
	@rm -f ../tmp/smadict-fst-script

smalemmalist.txt: bin/smalemmalist.txt
bin/smalemmalist.txt: $(LEX)
	@cat $(LEX) | \
	grep '<l ' | \
	cut -d">" -f2 | \
	cut -d"<" -f1 > bin/smalemmalist.txt

clean:
	@rm -f bin/smalemmalist.txt bin/smadict.fst	
